@*//Register/Modify/RegUID*@

@{
    ViewBag.Title = "Registration";
}

@Html.Action("Summary", "Register", new { regId = ViewBag.RegId, ViewBag.isAdmin });

<div class="row">
    <div class="large-12 columns">
        
        @if (@ViewBag.IsConfirmed)
        {

            <div class="large-4 columns">
                @if (ViewContext.RouteData.Values["translation"].ToString() == "en")
                {
                    <p>This registration has been confirmed and can not be modified.</p>
                    <p>If you need to modify, please email <a href="mailto:gct826@gmail.com">gct826@gmail.com</a> with your modification request.</p>

                }
                        
                @if (ViewContext.RouteData.Values["translation"].ToString() == "zh")
                {
                    <p>注册已被证实，不能修改。</p>
                    <p>如果需要修改，请电邮 <a href="mailto:gct826@gmail.com">gct826@gmail.com</a>。</p>

                }
                
                        
                @if (ViewBag.isAdmin == true)
                {
                    <input type="button" title="Edit Registration" value="Edit Registration" onclick=" location.href = '@Url.Action("Unlock", "Register", new { RegUID = ViewBag.RegUID, isAdmin = ViewBag.isAdmin }, "")    ' " />
                    <input type="button" title="Add Payment" value="Add Payment" onclick=" location.href = '@Url.Action("Create", "Payment", new { id = ViewBag.RegID })    ' " />
                    <input type="button" title="Check Out All" value ="Check Out All" onclick=" location.href = '@Url.Action("CheckOutReg", "CheckIn", new { id = ViewBag.RegID })' "/>
                    <br/>
                    <input type="button" title="Part Search" value="Part Search" onclick=" location.href = '@Url.Action("Index", "SearchRegistration")    ' " />
                    <input type="button" title="Reg List" value="Reg List" onclick=" location.href = '@Url.Action("Index", "AdminRegistration")    ' " />
                    <input type="button" title="History" value="History" onclick=" location.href = '@Url.Action("Reg", "AdminHistory", new { id = ViewBag.RegID })    ' " />
                }
                        

            </div>
            @*Html.RenderAction("PaymentSummary", "Register", new { ID = ViewBag.RegID });*@

        }

        @if (ViewBag.IsConfirmed == false && ViewBag.confirmation == false)
        {
            if (ViewContext.RouteData.Values["translation"].ToString() == "en")
            {
                <p>Select "Add Participant to add a new participant. Please click "Confirm Registration" once you're done.</p>
                <input class="button tiny" type="button" title="Add New" value="Add Participant" onclick=" location.href = '@Url.Action("Participant", "Register", new { regObjectId = ViewBag.RegObjectId, partId = 0 })    ' " />
                <input class="button tiny" type="button" title="Confim" value="Confirm Registration" onclick=" location.href = '@Url.Action("Registration", "Register", new { regObjectId = ViewBag.RegObjectId, confirmation = true }, "")    ' " />
            }

            if (ViewContext.RouteData.Values["translation"].ToString() == "zh")
            {
                <p>请点击”加与会者“加一个新的参与者。请点击”证实注册“一旦你完成。</p>
                <input type="button" title="加与会者" value="加与会者" onclick=" location.href = '@Url.Action("Participant", "Register", new { regObjectId = ViewBag.RegObjectId, partId = 0 })    ' " />
                <input type="button" title="证实注册" value="证实注册" onclick=" location.href = @Url.Action("Registration", "Register", new { regObjectId = ViewBag.RegObjectId, confirmation = true }, "")    ' " />
            }

            if (ViewBag.isAdmin == true)
            {
                <input class="button tiny" type="button" title="Add New" value="Add Participant" onclick=" location.href = '@Url.Action("Participant", "Register", new { regObjectId = ViewBag.RegObjectId, partId = 0 })    ' " />
                <input class="button tiny" type="button" title="Confim" value="Confirm Registration" onclick=" location.href = '@Url.Action("Confirm", "Register", new { regObjectId = ViewBag.RegObjectId, isAdmin = ViewBag.isAdmin }, "")    ' " />
                <input class="button tiny" type="button" title="Part Search" value="Part Search" onclick=" location.href = '@Url.Action("Index", "SearchRegistration")    ' " />
                <input class="button tiny" type="button" title="Reg List" value="Reg List" onclick=" location.href = '@Url.Action("Index", "AdminRegistration")    ' " />
                <input class="button tiny" type="button" title="History" value="History" onclick=" location.href = '@Url.Action("Reg", "AdminHistory", new { id = ViewBag.RegID })    ' " />
            }
        }

        @if (ViewBag.confirmation)
        {
            using (Html.BeginForm())
             {
                 @Html.AntiForgeryToken()
                 <input data-val="true" data-val-required="The Id field is required." id="RegId" name="RegId" type="hidden" value="@ViewBag.RegId" />

                 <div class="row">
                     <div class="large-12 columns">
        
                         @if (ViewContext.RouteData.Values["translation"].ToString() == "en")
                         {
                             <p>Please click Confirm again to Confirm Registration.</p>
                             <input class="button tiny" type="submit" title="Confirm" value="Confirm" name ="submit"/>
                             @Html.ActionLink("Cancel", "Registration", "Register", new {regObjectId = ViewBag.RegObjectId}, new {@class = "button tiny alert"})
                         }

                         @if (ViewContext.RouteData.Values["translation"].ToString() == "zh")
                         {
                             <p>你确定你要删除的参与者?</p>
                             <input class="button tiny" type="submit" title="Confirm" value="Confirm" name ="submit"/>
                             @Html.ActionLink("Cancel", "Registration", "Register", new {regObjectId = ViewBag.RegObjectId}, new {@class = "button tiny alert"})
                         }
                     </div>
                 </div>
             }
        }
            
    </div>
</div>

<div class="row">
    
    <div class="large-12 columns">
        @if (ViewContext.RouteData.Values["translation"].ToString() == "en")
        {
            <h4>Registered Participants</h4>
        }
        @if (ViewContext.RouteData.Values["translation"].ToString() == "zh")
        {
            <h4>报名会者</h4>
        }
    </div>
</div>


@Html.Action("SummaryHelper", "Register", new { translationObjectId = ViewBag.TranslationObjectId, regId = ViewBag.RegId, ViewBag.isAdmin, partId = 0 })

@section head
{
    @{ Html.RenderAction("NavBar", "Shared");}
}
